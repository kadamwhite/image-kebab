(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(34)},22:function(e,t,n){},24:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(12),r=n.n(i),s=(n(22),n(3)),c=n(4),l=n(7),u=n(5),h=n(6),g=n(2),d=(n(24),n(16)),m=(n(28),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).onDrop=n.onDrop.bind(Object(g.a)(Object(g.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onDrop",value:function(e){var t=this.props.onDrop;e.forEach(function(e){var n=new FileReader;n.onload=function(e){var n=new Image;n.onload=function(){t({src:n.src,width:this.width,height:this.height})},n.src=e.target.result},n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.readAsDataURL(e)})}},{key:"render",value:function(){return o.a.createElement(d.a,{onDrop:this.onDrop},o.a.createElement("div",{className:"dropzone-placeholder"}))}}]),t}(a.PureComponent)),v=n(8),f=n(14),b=n(9),p=n(10),w=n(15),y=n.n(w),j=(n(30),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={dragging:!1},n.dragging=!1,n.onMouseDown=n.onMouseDown.bind(Object(g.a)(Object(g.a)(n))),n.onMouseMove=n.onMouseMove.bind(Object(g.a)(Object(g.a)(n))),n.onMouseUp=n.onMouseUp.bind(Object(g.a)(Object(g.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"getZoneDimensions",value:function(){var e=this.props.zones,t=this.el.getBoundingClientRect(),n=t.width;return{height:t.height/e.length,width:n/e[0].length}}},{key:"getZoneCoordinates",value:function(e,t){var n=this.el.getBoundingClientRect(),a=n.top,o=n.left,i=this.getZoneDimensions(),r=i.height,s=i.width;return{col:Math.floor((e-o)/s),row:Math.floor((t-a)/r)}}},{key:"getZone",value:function(e,t){var n=this.props.zones,a=this.getZoneCoordinates(e,t),o=a.row,i=a.col;return n[o][i]}},{key:"onDrag",value:function(e,t){this.state.dragging&&"function"===typeof this.props.onDrag&&this.props.onDrag(this.state.dragging,[e-this.x,t-this.y])}},{key:"onMouseDown",value:function(e){this.setState({dragging:this.getZone(e.clientX,e.clientY),preview:null}),this.x=e.clientX,this.y=e.clientY}},{key:"onMouseMove",value:function(e){if(this.state.dragging)this.onDrag(e.clientX,e.clientY),this.x=e.clientX,this.y=e.clientY;else{var t=this.getZoneDimensions(),n=t.width,a=t.height,o=this.getZoneCoordinates(e.clientX,e.clientY),i=n*o.col,r=a*o.row;this.setState({preview:{x:i,y:r}})}}},{key:"onMouseUp",value:function(e){this.state.dragging&&this.onDrag(e.clientX,e.clientY),this.setState({dragging:!1})}},{key:"renderPreview",value:function(){var e=this.state,t=e.preview;if(e.dragging||!t)return null;var n=this.getZoneDimensions(),a=n.width,i=n.height;return o.a.createElement("div",{className:"dragzone__preview",style:{top:t.y,left:t.x,width:a,height:i}})}},{key:"render",value:function(){var e=this,t=this.props.className,n=this.state.dragging;return o.a.createElement("div",{ref:function(t){e.el=t},className:y()(t,{dragging:n}),onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp},this.renderPreview())}}]),t}(a.PureComponent)),O=(n(32),window.numeric),k=function(e){var t=Object(p.a)(e,2);return{x:t[0],y:t[1]}},x=function(e,t,n){for(var a=[{x:0,y:0},{x:0,y:n},{x:t,y:0},{x:t,y:n}],o=[e.tl,e.bl,e.tr,e.br].map(function(e,t){var n=a[t];return{x:n.x+e.x,y:n.y+e.y}}),i=function(e,t){var n=e.reduce(function(e,n,a){var o=n.x,i=n.y,r=t[a];return Object(b.a)(e).concat([[o,i,1,0,0,0,-o*r.x,-i*r.x],[0,0,0,o,i,1,-o*r.y,-i*r.y]])},[]),a=t.reduce(function(e,t){var n=t.x,a=t.y;return Object(b.a)(e).concat([n,a])},[]),o=O.solve(n,a);return[[o[0],o[1],0,o[2]],[o[3],o[4],0,o[5]],[0,0,1,0],[o[6],o[7],0,1]]}(a,o),r=[],s=0;s<4;s++)for(var c=0;c<4;c++)r.push(i[c][s]);return"matrix3d(".concat(r.join(","),")")},D=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={transforms:{tl:k([0,0]),tr:k([0,0]),br:k([0,0]),bl:k([0,0])}},n.move=n.move.bind(Object(g.a)(Object(g.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"setComputedImageSize",value:function(e){if(!this.computedImageWidth||!this.computedImageHeight){var t=e.getBoundingClientRect(),n=t.width,a=t.height;this.computedImageWidth=n,this.computedImageHeight=a}}},{key:"move",value:function(e,t){var n=Object(p.a)(t,2),a=n[0],o=n[1];if(["tr","tl","br","bl"].includes(e)){var i=this.state.transforms,r=i[e],s=r.x,c=r.y;this.setState({transforms:Object(f.a)({},i,Object(v.a)({},e,{x:s+a,y:c+o}))})}else console.error('Invalid corner "'.concat(e,'"! Specify one of "tl", "tr", "br", or "bl"'))}},{key:"getTransform",value:function(){var e=this.state.transforms,t=this.computedImageWidth,n=this.computedImageHeight;return t&&n?x(e,t,n):"initial"}},{key:"render",value:function(){var e=this;if(!this.props.image)return null;var t=this.props.image,n=t.src,a=t.width,i=t.height;return o.a.createElement("div",{className:"skewer"},o.a.createElement(j,{className:"dragzone dragzone--tr",zones:[["tl","tr"],["bl","br"]],onDrag:this.move}),o.a.createElement("img",{alt:"skewable",ref:function(t){return e.setComputedImageSize(t)},style:{transform:this.getTransform()},src:n,width:a,height:i}))}}]),t}(a.PureComponent),M=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={image:null},n.setImage=n.setImage.bind(Object(g.a)(Object(g.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"setImage",value:function(e){console.log(e),this.setState({image:e})}},{key:"render",value:function(){var e=this.state.image;return console.log(e),o.a.createElement("div",{className:"App"},e?o.a.createElement(D,{image:e}):o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",null,"Image Kebab",o.a.createElement("em",null,"!")),o.a.createElement(m,{onDrop:this.setImage}),o.a.createElement("p",null,"Drag-and-drop the image to skewer into the box above."),o.a.createElement("small",{className:"attribution"},o.a.createElement("a",{href:"https://www.vexels.com/vectors/preview/132102/shish-kebab-icon"},"Shish kebab icon")," designed by Vexels")))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,2,1]]]);
//# sourceMappingURL=main.cdc3be28.chunk.js.map