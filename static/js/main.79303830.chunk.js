(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,n,t){e.exports=t(44)},34:function(e,n,t){},36:function(e,n,t){},38:function(e,n,t){},40:function(e,n,t){},42:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(13),i=t.n(o),c=t(3),u=(t(34),function(e){var n=e.children,t=e.height,r=e.src,o=e.width,i=e.matrixTransform;return r?a.a.createElement("div",{className:"skewer"},n,a.a.createElement("img",{alt:"skewable",style:{transform:i},src:r,width:o,height:t})):null});u.defaultProps={children:null};var l=u,s=t(16),h=t.n(s),d="tl",f=[d,"bl","tr","br"],m=t(10),g=(t(22),window.numeric),v=function(e,n,t){for(var r=[{x:0,y:0},{x:0,y:n},{x:e,y:0},{x:e,y:n}],a=t.map(function(e,n){var t=r[n];return{x:t.x+e.x,y:t.y+e.y}}),o=function(e,n){var t=e.reduce(function(e,t,r){var a=t.x,o=t.y,i=n[r];return[].concat(Object(m.a)(e),[[a,o,1,0,0,0,-a*i.x,-o*i.x],[0,0,0,a,o,1,-a*i.y,-o*i.y]])},[]),r=n.reduce(function(e,n){var t=n.x,r=n.y;return[].concat(Object(m.a)(e),[t,r])},[]),a=g.solve(t,r);return[[a[0],a[1],0,a[2]],[a[3],a[4],0,a[5]],[0,0,1,0],[a[6],a[7],0,1]]}(r,a),i=[],c=0;c<4;c++)for(var u=0;u<4;u++)i.push(o[u][c]);return"matrix3d(".concat(i.join(","),")")},y=function(e){return e.image.src},b=function(e){return e.image.corners.tr.x-e.image.corners.tl.x},w=function(e){return e.image.corners.bl.y-e.image.corners.tl.y},p=function(e,n){return e.handles[n]},E=function(e,n){return p(e,n).x},x=function(e,n){return p(e,n).y},O=(h()(function(e,n){return[{x:0,y:0},{x:0,y:n},{x:e,y:0},{x:e,y:n}]}),function(e){var n=b(e),t=w(e),r=f.map(function(n){return function(e,n){var t=function(e,n){return e.image.corners[n]}(e,n),r=p(e,n);return{x:r.x-t.x,y:r.y-t.y}}(e,n)});return v(n,t,r)}),j=Object(c.b)(function(e){return{src:y(e),width:b(e),height:w(e),matrixTransform:O(e)}})(l),M=t(1),D=function(e){return{type:"SET_IMAGE",payload:e}},_=t(17),k=t(18),N=t(23),S=t(19),L=t(24),T=t(4),A=t(20),I=t.n(A),X=(t(36),function(e){function n(e){var t;return Object(_.a)(this,n),(t=Object(N.a)(this,Object(S.a)(n).call(this,e))).state={dragging:!1},t.dragging=!1,t.onMouseDown=t.onMouseDown.bind(Object(T.a)(Object(T.a)(t))),t.onMouseMove=t.onMouseMove.bind(Object(T.a)(Object(T.a)(t))),t}return Object(L.a)(n,e),Object(k.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.onMouseMove)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.onMouseMove)}},{key:"onDrag",value:function(e,n){this.state.dragging&&"function"===typeof this.props.onDrag&&this.props.onDrag(e,n)}},{key:"onMouseDown",value:function(e){e.preventDefault(),this.state.dragging?this.setState({dragging:!1}):(this.setState({dragging:!0}),this.x=e.clientX,this.y=e.clientY)}},{key:"onMouseMove",value:function(e){this.state.dragging&&this.onDrag(e.clientX,e.clientY)}},{key:"render",value:function(){var e=this,n=this.props,t=n.x,r=n.y,o=this.state.dragging;return a.a.createElement("div",{className:I()("draghandle",{dragging:o}),ref:function(n){e.el=n},style:{top:r,left:t},onMouseDown:this.onMouseDown})}}]),n}(r.PureComponent)),F=Object(c.b)(function(e,n){return{x:E(e,n.corner),y:x(e,n.corner)}},function(e,n){return{onDrag:function(t,r){e(function(e,n,t){return{type:"MOVE_HANDLE",payload:{corner:e,x:n,y:t}}}(n.corner,t,r))}}})(X),V=t(6),C=function(e,n){var t,r=window.innerWidth,a=window.innerHeight,o=Math.min(e,.9*r)/e,i=Math.min(n,.9*a)/n,c=Math.min(o,i),u=c*e,l=c*n,s=(a-l)/2,h=(r-u)/2;return t={},Object(M.a)(t,d,{x:h,y:s}),Object(M.a)(t,"tr",{x:h+u,y:s}),Object(M.a)(t,"bl",{x:h,y:s+l}),Object(M.a)(t,"br",{x:h+u,y:s+l}),t},P=function(e){return new Promise(function(n,t){var r=new FileReader;r.onload=function(e){var r;(r=e.target.result,new Promise(function(e,n){var t=new Image;t.onload=function(){e({width:this.width,height:this.height,src:r})},t.onerror=function(e){return n(e)},t.src=r})).then(n).catch(t)},r.onabort=function(){return t("File read aborted")},r.onerror=function(){return t("File read failed")},r.readAsDataURL(e)})},R=(t(38),function(){return a.a.createElement("div",{className:"dropzone-placeholder"})}),U=Object(c.b)(null,function(e){return{onChange:function(n){P(n.target.files[0]).then(function(n){return e(D(n))})}}})(function(e){var n=e.onChange;return a.a.createElement(r.Fragment,null,a.a.createElement(R,null),a.a.createElement("input",{className:"image-upload-button",type:"file",onChange:n}))}),W=t(21),G=t.n(W),H=Object(c.b)(null,function(e){return{onDrop:function(n){P(n[0]).then(function(n){return e(D(n))})}}})(function(e){var n=e.children,t=e.onDrop;return a.a.createElement(G.a,{className:"dropzone",onDrop:t},n)}),z=(t(40),Object(c.b)(function(e){return{imageLoaded:!!e.image.src}})(function(e){var n=e.imageLoaded;return a.a.createElement(H,null,a.a.createElement("div",{className:"App"},n?a.a.createElement(r.Fragment,null,a.a.createElement(j,null),f.map(function(e){return a.a.createElement(F,{key:"handle-".concat(e),corner:e})})):a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",null,"Image Kebab",a.a.createElement("em",null,"!")),a.a.createElement(U,null),a.a.createElement("p",null,"Drag-and-drop the image to skewer into this browser window."),a.a.createElement("small",{className:"attribution"},a.a.createElement("a",{href:"https://www.vexels.com/vectors/preview/132102/shish-kebab-icon"},"Shish kebab icon")," designed by Vexels"))))})),B=t(5),J={src:"",width:0,height:0,corners:f.reduce(function(e,n){return Object(V.a)({},e,Object(M.a)({},n,{x:0,y:0}))},{})},Y=Object(B.b)({handles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("SET_IMAGE"===n.type){if(e)return e;var t=n.payload,r=t.width,a=t.height;return C(r,a)}if("MOVE_HANDLE"===n.type){var o=n.payload,i=o.corner,c=o.x,u=o.y;return e&&e[i].x===c&&e[i].y===u?e:Object(V.a)({},e,Object(M.a)({},i,{x:c,y:u}))}return e},image:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("SET_IMAGE"===n.type){var t=n.payload,r=t.src,a=t.width,o=t.height;return{src:r,width:a,height:o,corners:C(a,o)}}return e}}),K=Object(B.c)(Y,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(42);i.a.render(a.a.createElement(c.a,{store:K},a.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.79303830.chunk.js.map