(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,n,t){e.exports=t(44)},34:function(e,n,t){},36:function(e,n,t){},38:function(e,n,t){},40:function(e,n,t){},42:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(13),i=t.n(a),c=t(3),u=(t(34),function(e){var n=e.children,t=e.height,r=e.src,a=e.width,i=e.matrixTransform;return r?o.a.createElement("div",{className:"skewer"},n,o.a.createElement("img",{alt:"skewable",style:{transform:i},src:r,width:a,height:t})):null});u.defaultProps={children:null};var l=u,s=t(16),h=t.n(s),d="tl",f=[d,"bl","tr","br"],m=t(10),g=(t(22),window.numeric),v=function(e,n,t){for(var r=[{x:0,y:0},{x:0,y:n},{x:e,y:0},{x:e,y:n}],o=t.map(function(e,n){var t=r[n];return{x:t.x+e.x,y:t.y+e.y}}),a=function(e,n){var t=e.reduce(function(e,t,r){var o=t.x,a=t.y,i=n[r];return[].concat(Object(m.a)(e),[[o,a,1,0,0,0,-o*i.x,-a*i.x],[0,0,0,o,a,1,-o*i.y,-a*i.y]])},[]),r=n.reduce(function(e,n){var t=n.x,r=n.y;return[].concat(Object(m.a)(e),[t,r])},[]),o=g.solve(t,r);return[[o[0],o[1],0,o[2]],[o[3],o[4],0,o[5]],[0,0,1,0],[o[6],o[7],0,1]]}(r,o),i=[],c=0;c<4;c++)for(var u=0;u<4;u++)i.push(a[u][c]);return"matrix3d(".concat(i.join(","),")")},y=function(e){return e.image.src},p=function(e){return e.image.corners.tr.x-e.image.corners.tl.x},b=function(e){return e.image.corners.bl.y-e.image.corners.tl.y},w=function(e,n){return e.handles[n]},E=function(e,n){return w(e,n).x},x=function(e,n){return w(e,n).y},O=(h()(function(e,n){return[{x:0,y:0},{x:0,y:n},{x:e,y:0},{x:e,y:n}]}),function(e){var n=p(e),t=b(e),r=f.map(function(n){return function(e,n){var t=function(e,n){return e.image.corners[n]}(e,n),r=w(e,n);return{x:r.x-t.x,y:r.y-t.y}}(e,n)});return v(n,t,r)}),j=Object(c.b)(function(e){return{src:y(e),width:p(e),height:b(e),matrixTransform:O(e)}})(l),M=t(1),D=function(e){return{type:"SET_IMAGE",payload:e}},k=t(17),_=t(18),N=t(23),S=t(19),L=t(24),T=t(4),A=t(20),I=t.n(A),C=(t(36),function(e){function n(e){var t;return Object(k.a)(this,n),(t=Object(N.a)(this,Object(S.a)(n).call(this,e))).state={dragging:!1},t.dragging=!1,t.onMouseDown=t.onMouseDown.bind(Object(T.a)(Object(T.a)(t))),t.onMouseMove=t.onMouseMove.bind(Object(T.a)(Object(T.a)(t))),t}return Object(L.a)(n,e),Object(_.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this.onMouseMove)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousemove",this.onMouseMove)}},{key:"onDrag",value:function(e,n){this.state.dragging&&"function"===typeof this.props.onDrag&&this.props.onDrag(e+this.x,n+this.y)}},{key:"onMouseDown",value:function(e){if(e.preventDefault(),this.state.dragging)this.setState({dragging:!1});else{this.setState({dragging:!0});var n=this.props,t=n.x,r=n.y,o=e.clientX,a=e.clientY;this.x=t-o,this.y=r-a}}},{key:"onMouseMove",value:function(e){this.state.dragging&&this.onDrag(e.clientX,e.clientY)}},{key:"render",value:function(){var e=this,n=this.props,t=n.x,r=n.y,a=this.state.dragging;return o.a.createElement("div",{className:I()("draghandle",{dragging:a}),ref:function(n){e.el=n},style:{top:r,left:t},onMouseDown:this.onMouseDown})}}]),n}(r.PureComponent)),X=Object(c.b)(function(e,n){return{x:E(e,n.corner),y:x(e,n.corner)}},function(e,n){return{onDrag:function(t,r){e(function(e,n,t){return{type:"MOVE_HANDLE",payload:{corner:e,x:n,y:t}}}(n.corner,t,r))}}})(C),F=t(6),V=function(e,n){var t,r=window.innerWidth,o=window.innerHeight,a=Math.min(e,.9*r)/e,i=Math.min(n,.9*o)/n,c=Math.min(a,i),u=c*e,l=c*n,s=(o-l)/2,h=(r-u)/2;return t={},Object(M.a)(t,d,{x:h,y:s}),Object(M.a)(t,"tr",{x:h+u,y:s}),Object(M.a)(t,"bl",{x:h,y:s+l}),Object(M.a)(t,"br",{x:h+u,y:s+l}),t},P=function(e){return new Promise(function(n,t){var r=new FileReader;r.onload=function(e){var r;(r=e.target.result,new Promise(function(e,n){var t=new Image;t.onload=function(){e({width:this.width,height:this.height,src:r})},t.onerror=function(e){return n(e)},t.src=r})).then(n).catch(t)},r.onabort=function(){return t("File read aborted")},r.onerror=function(){return t("File read failed")},r.readAsDataURL(e)})},R=(t(38),function(){return o.a.createElement("div",{className:"dropzone-placeholder"})}),U=Object(c.b)(null,function(e){return{onChange:function(n){P(n.target.files[0]).then(function(n){return e(D(n))})}}})(function(e){var n=e.onChange;return o.a.createElement(r.Fragment,null,o.a.createElement(R,null),o.a.createElement("input",{className:"image-upload-button",type:"file",onChange:n}))}),W=t(21),G=t.n(W),H=Object(c.b)(null,function(e){return{onDrop:function(n){P(n[0]).then(function(n){return e(D(n))})}}})(function(e){var n=e.children,t=e.onDrop;return o.a.createElement(G.a,{className:"dropzone",onDrop:t},n)}),z=(t(40),Object(c.b)(function(e){return{imageLoaded:!!e.image.src}})(function(e){var n=e.imageLoaded;return o.a.createElement(H,null,o.a.createElement("div",{className:"App"},n?o.a.createElement(r.Fragment,null,o.a.createElement("p",{className:"directions"},"Click a corner, then move your mouse to position corner. Click again to lock position."),o.a.createElement(j,null),f.map(function(e){return o.a.createElement(X,{key:"handle-".concat(e),corner:e})})):o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",null,"Image Kebab",o.a.createElement("em",null,"!")),o.a.createElement(U,null),o.a.createElement("p",null,"Drag-and-drop the image to skewer into this browser window."),o.a.createElement("small",{className:"attribution"},o.a.createElement("a",{href:"https://www.vexels.com/vectors/preview/132102/shish-kebab-icon"},"Shish kebab icon")," designed by Vexels"))))})),B=t(5),J={src:"",width:0,height:0,corners:f.reduce(function(e,n){return Object(F.a)({},e,Object(M.a)({},n,{x:0,y:0}))},{})},Y=Object(B.b)({handles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("SET_IMAGE"===n.type){if(e)return e;var t=n.payload,r=t.width,o=t.height;return V(r,o)}if("MOVE_HANDLE"===n.type){var a=n.payload,i=a.corner,c=a.x,u=a.y;return e&&e[i].x===c&&e[i].y===u?e:Object(F.a)({},e,Object(M.a)({},i,{x:c,y:u}))}return e},image:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("SET_IMAGE"===n.type){var t=n.payload,r=t.src,o=t.width,a=t.height;return{src:r,width:o,height:a,corners:V(o,a)}}return e}}),K=Object(B.c)(Y,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(42);i.a.render(o.a.createElement(c.a,{store:K},o.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.dbec3582.chunk.js.map